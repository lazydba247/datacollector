
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
      <meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Publishing Metadata to Cloudera Navigator" /><meta name="abstract" content="If you use Cloudera Manager, you can configure Data Collector to publish metadata about running pipelines to Cloudera Navigator. You can then use Cloudera Navigator to explore the pipeline metadata, including viewing lineage diagrams of the metadata." /><meta name="description" content="If you use Cloudera Manager, you can configure Data Collector to publish metadata about running pipelines to Cloudera Navigator. You can then use Cloudera Navigator to explore the pipeline metadata, including viewing lineage diagrams of the metadata." /><meta name="DC.Relation" scheme="URI" content="../../../datacollector/UserGuide/Configuration/Config_title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_q4y_4mt_p1b" /><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/commonltr.css?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></link><title>Publishing Metadata to Cloudera Navigator</title><!--  Generated with Oxygen version @@WEBHELP_VERSION@@, build number @@WEBHELP_BUILD_NUMBER@@.  --><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/css/webhelp_topic.css?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></link><link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/resources/skins/skin.css?buildId=@@WEBHELP_BUILD_NUMBER@@" /><script type="text/javascript"><!--
          
          var prefix = "../../../index.html";
          
          --></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery-3.1.1.min.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../../../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/log.js?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></script><script type="text/javascript" charset="utf-8" src="../../../oxygen-webhelp/resources/js/webhelp_topic.js?buildId=@@WEBHELP_BUILD_NUMBER@@"><!----></script>
<!--
  Copyright 2018 StreamSets Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../../../datacollector/UserGuide/Configuration/Config_title.html" title="Configuration">Configuration</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../../../datacollector/UserGuide/Configuration/Config_title.html" title="Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Configuration</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_q4y_4mt_p1b">
    <h1 class="title topictitle1">Publishing Metadata to Cloudera Navigator</h1>

    
    <div class="body conbody"><p class="shortdesc">If you use Cloudera Manager, you can configure <span class="ph">Data Collector</span> to
        publish metadata about running pipelines to Cloudera Navigator. You can then use Cloudera
        Navigator to explore the pipeline metadata, including viewing lineage diagrams of the
        metadata. </p>

        <p class="p">Cloudera Navigator integration is
            available with a paid subscription. For details, <a class="xref" href="https://streamsets.com/contact-us/" target="_blank">contact
                us</a>.</p>

        <p class="p">At this time, only some pipeline stages support publishing metadata. <span class="ph">Data Collector</span>
            publishes metadata for all supported stages in all running pipelines. If you have
            multiple <span class="ph">Data Collector</span>s
            that run pipelines, configure each <span class="ph">Data Collector</span> to
            publish metadata to the same Cloudera Navigator instance.</p>

        <p class="p"><span class="ph">Data Collector</span>
            uses separate threads to publish metadata - so enabling metadata publishing has no
            effect on the running pipeline threads. Every pipeline publishes metadata when the
            pipeline starts and when it stops. Some origins and destinations publish metadata only
            once, typically when they initialize. However, some stages publish metadata each time
            they create a new object - for example, when the Hadoop FS or Local FS destination
            creates a new output file. </p>

        <p class="p">When publishing metadata, <span class="ph">Data Collector</span>
            makes an HTTPS request to Cloudera Navigator, using basic authentication. The data is
            sent in JSON format.</p>

    </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_iz5_ptt_p1b">
 <h2 class="title topictitle2">Prerequisites</h2>

 <div class="body conbody">
        <p class="p">Before you
            enable <span class="ph">Data Collector</span> to
            publish pipeline metadata to Cloudera Navigator, you must complete the following
            prerequisites:</p>

        <dl class="dl">
            
                <dt class="dt dlterm">Verify that <span class="ph">Data Collector</span> has the Cloudera CDH stage library version 5.10 or 5.11 installed. </dt>

                <dd class="dd"><span class="ph">Data Collector</span> requires the Cloudera CDH stage library version 5.10 or 5.11 to connect to
                    and publish metadata to Cloudera Navigator. </dd>

                <dd class="dd">To verify that a <span class="ph">Data Collector</span> has a valid Cloudera CDH stage library installed, click the Package Manager
                    icon (<img class="image" id="concept_iz5_ptt_p1b__image_hgv_t1q_rx" src="../Graphics/icon_PackageManager.png" height="13" width="16" />) to display the list of installed stage libraries.
                    If the required library version is not installed, <a class="xref" href="../Installation/AddtionalStageLibs.html#concept_fb2_qmn_bz">install
                        the library</a> before configuring <span class="ph">Data Collector</span> to publish pipeline metadata to Cloudera Navigator.</dd>

            
            
                <dt class="dt dlterm">Add the Cloudera Navigator data management roles to your Cloudera Manager
                    cluster. </dt>

                <dd class="dd">Add the following Navigator roles to the Cloudera Management Service:<ul class="ul" id="concept_iz5_ptt_p1b__ul_jml_dwt_p1b">
                        <li class="li">Cloudera Navigator Audit Server role</li>

                        <li class="li">Cloudera Navigator Metadata Server role</li>

                    </ul>
</dd>

                <dd class="dd">For instructions, see the Cloudera Manager documentation. </dd>

            
        </dl>

    </div>

</div>
<div class="topic concept nested1" id="concept_pvq_cs3_v1b">
 <h2 class="title topictitle2">Viewing Published Metadata</h2>

 
 <div class="body conbody"><p class="shortdesc">You can view published pipeline metadata in near real time in Cloudera Navigator.
        Cloudera Navigator lists each pipeline by pipeline title and displays supported origins as
        inputs and supported destinations as outputs. Cloudera Navigator also includes a URL to the
        pipeline within <span class="ph">Data Collector</span>.</p>

        <p class="p">For example, let's assume that you run a pipeline that
            includes a JDBC Query Consumer origin and a Local FS destination. Cloudera Navigator
            displays a single input representing the JDBC Query Consumer origin. As the pipeline
            runs, the Local FS destination creates multiple output files. Cloudera Navigator
            displays multiple outputs, each output representing one of the generated output files. </p>

        <p class="p">Cloudera Navigator displays the details of the published pipeline metadata as follows.
            Note how our example Jdbc2LocalFS pipeline is listed with 1 input and 42 outputs - one
            output for each generated output file:</p>

        <p class="p"><img class="image" id="concept_pvq_cs3_v1b__image_axz_tt3_v1b" src="../Graphics/Navigator_Details.png" height="452" width="857" /></p>

        <p class="p">Cloudera Navigator displays the pipeline lineage diagram as follows:</p>

        <p class="p"><img class="image" id="concept_pvq_cs3_v1b__image_ofk_j53_v1b" src="../Graphics/Navigator_Lineage.png" height="434" width="578" /></p>

    </div>

</div>
<div class="topic concept nested1" id="concept_h4w_qld_v1b">
 <h2 class="title topictitle2">Supported Stages</h2>

 <div class="body conbody">
        <div class="p"><span class="ph">Data Collector</span> can
            publish metadata for the following stages:<ul class="ul" id="concept_h4w_qld_v1b__ul_sj5_tld_v1b">
                <li class="li">Dev Data Generator origin</li>

                <li class="li">Directory origin</li>

                <li class="li">JDBC Query Consumer origin</li>

                <li class="li">Hadoop FS destination</li>

                <li class="li">Local FS destination</li>

                <li class="li">HBase destination</li>

                <li class="li">Hive Streaming destination</li>

                <li class="li">Kudu destination</li>

            </ul>
</div>

        <div class="note note"><span class="notetitle">Note:</span> Remember that you don't enable metadata publishing at the stage level or even at the
            pipeline level. You simply configure <span class="ph">Data Collector</span> to
            publish metadata for all running pipelines. </div>

        <p class="p">When a pipeline includes an unsupported stage, Cloudera Navigator does not display that
            stage as an input or output. For example, if a running pipeline includes an unsupported
            origin and the Hadoop FS destination, then Cloudera Navigator displays the pipeline as
            having 0 inputs and multiple outputs - one output for each generated output file. If a
            running pipeline includes no supported origins or destinations, Cloudera Navigator
            displays the pipeline as having 0 inputs and 0 outputs.</p>

    </div>

</div>
<div class="topic task nested1" id="task_e12_xyt_p1b">
    <h2 class="title topictitle2">Configuring Data Collector to Publish Metadata</h2>

    
    <div class="body taskbody"><p class="shortdesc">Configure the lineage publisher properties in the <span class="ph">Data Collector</span>
        configuration file, <samp class="ph systemoutput">$SDC_CONF/sdc.properties</samp>. When
        administering <span class="ph">Data Collector</span> with
        Cloudera Manager, configure the <span class="ph">Data Collector</span>
        configuration properties through the StreamSets service in Cloudera Manager. Manual changes
        to the configuration file can be overwritten by Cloudera Manager.</p>

        <div class="section context">
            <div class="p">Configuring the properties includes enabling metadata publishing and defining the
                connection to Cloudera Navigator.<div class="note warning"><span class="warningtitle">Warning:</span> If metadata publishing is
                    enabled and <span class="ph">Data Collector</span> cannot connect to Cloudera Navigator at start up, then <span class="ph">Data Collector</span> fails to start.</div>
</div>

        </div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">To enable metadata publishing, uncomment the following lines in the
                        <samp class="ph codeph">sdc.properties</samp> file:</span>
                <div class="itemgroup info">
                    <pre class="pre codeblock">#lineage.publishers=navigator
#lineage.publisher.navigator.def=streamsets-datacollector-cdh_5_11-lib::com_streamsets_pipeline_stage_plugin_navigator_NavigatorLineagePublisher</pre>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">In the <samp class="ph codeph">lineage.publisher.navigator.def</samp> property, specify the
                    name of the Cloudera CDH stage library that is installed on <span class="ph">Data Collector</span>:</span>
                <div class="itemgroup info">
                    <pre class="pre codeblock">lineage.publisher.navigator.def=&lt;stage library name&gt;::com_streamsets_pipeline_stage_plugin_navigator_NavigatorLineagePublisher</pre>

                    <div class="p">For example, if <span class="ph">Data Collector</span> uses the Cloudera CDH version 5.10 stage library, configure the property
                        as
                        follows:<pre class="pre codeblock">lineage.publisher.navigator.def=streamsets-datacollector-cdh_5_10-lib::com_streamsets_pipeline_stage_plugin_navigator_NavigatorLineagePublisher</pre>
</div>

                    <p class="p">By default, Cloudera CDH version 5.11 is specified.</p>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To define the connection to Cloudera Navigator, uncomment and configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_e12_xyt_p1b__table_pxw_xc5_p1b" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="46.666666666666664%" id="d54430e339">Property</th>

                                    <th class="entry" valign="top" width="53.333333333333336%" id="d54430e342">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
      <td class="entry" valign="top" width="46.666666666666664%" headers="d54430e339 ">lineage.publisher.navigator.config.application_url</td>

      <td class="entry" valign="top" width="53.333333333333336%" headers="d54430e342 ">URL to <span class="ph">Data Collector</span>. For
       example:<pre class="pre codeblock">http://&lt;hostname&gt;:18630/</pre>
</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="46.666666666666664%" headers="d54430e339 ">lineage.publisher.navigator.config.navigator_url</td>

      <td class="entry" valign="top" width="53.333333333333336%" headers="d54430e342 ">URL to the Cloudera Navigator UI. For example:<div class="p">
        <pre class="pre codeblock">http://&lt;Navigator Metadata Server host&gt;:&lt;port number&gt;/</pre>

       </div>
<p class="p">
        <samp class="ph codeph">&lt;Navigator Metadata Server host&gt;</samp> is the name of the host on which you
        are running the Navigator Metadata Server role. <samp class="ph codeph">&lt;port number&gt;</samp> is the
        port configured for the role. The default port number is 7187.</p>
</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="46.666666666666664%" headers="d54430e339 ">lineage.publisher.navigator.config.namespace</td>

      <td class="entry" valign="top" width="53.333333333333336%" headers="d54430e342 ">Namespace that Cloudera Navigator uses to uniquely identify <span class="ph">Data Collector</span> properties.<p class="p">Default is
         <samp class="ph codeph">sdc</samp>.</p>
</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="46.666666666666664%" headers="d54430e339 ">lineage.publisher.navigator.config.username</td>

      <td class="entry" valign="top" width="53.333333333333336%" headers="d54430e342 ">User name to connect to Cloudera Navigator. </td>

     </tr>
<tr>
      <td class="entry" valign="top" width="46.666666666666664%" headers="d54430e339 ">lineage.publisher.navigator.config.password</td>

      <td class="entry" valign="top" width="53.333333333333336%" headers="d54430e342 ">Password for the Cloudera Navigator account.<div class="p">Enter one of the following:<ul class="ul" id="task_e12_xyt_p1b__d5129e4854">
         <li class="li">Password value.</li>

         <li class="li">File that contains the password value. For increased security, store the password in a
          separate file located in the <samp class="ph systemoutput">$SDC_CONF</samp> directory and
          reference the file in this property as follows: ${file("&lt;filename&gt;")}. For
           example:<pre class="pre codeblock">lineage.publisher.navigator.config.password=${file("NavigatorPassword.txt")}</pre>
<p class="p">For
           more information, see <a class="xref" href="DCConfig.html#concept_aqc_dbt_zr" title="For increased security you can store sensitive information, such as a password, in separate files and reference the files in the Data Collector configuration file, $SDC_CONF/sdc.properties, as follows: ${file(&#34;&lt;filename&gt;&#34;)}.">Referencing Sensitive Values in Files</a>.</p>
</li>

        </ul>
</div>
</td>

     </tr>
<tr>
      <td class="entry" valign="top" width="46.666666666666664%" headers="d54430e339 ">lineage.publisher.navigator.config.autocommit</td>

      <td class="entry" valign="top" width="53.333333333333336%" headers="d54430e342 ">Enables Cloudera Navigator to immediately process the published metadata.<p class="p">Setting to
        true can use a large number of resources on the Cloudera Navigator machine. </p>
<p class="p">Default
        is false. </p>
</td>

     </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Restart <span class="ph">Data Collector</span> for the changed properties to take effect.</span>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../../../datacollector/UserGuide/Configuration/Config_title.html" title="Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Configuration</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"><!-- Copyright 2018 StreamSets Inc. --><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>